# Proposal: 形態素解析による自動ふりがな生成

## 概要

VOICEVOXの音声合成における読み間違いを改善するため、形態素解析（fugashi + UniDic）を使用して日本語テキストのふりがなを自動生成し、発音辞書に登録する機能を追加する。

## 背景・課題

VOICEVOXは優れた音声合成エンジンだが、以下のような読み間違いが発生することがある：

| 単語 | 誤った読み | 正しい読み |
|------|-----------|-----------|
| 表計算 | おもてけいさん | ひょうけいさん |
| 人月 | じんげつ | にんげつ |
| Button | びーゆーてぃてぃえぬ | ボタン |

現状の解決策（LLMによる発音辞書生成）は、LLMが「読み間違えそうな単語」を予測して出力するだけなので不完全である。

## 解決策

形態素解析ライブラリ（fugashi）と日本語辞書（UniDic）を使用して、ナレーションテキストを解析し、すべての単語に正確なふりがなを自動生成する。

### アーキテクチャ

```
ナレーションテキスト
    ↓
形態素解析 (fugashi + UniDic)
    ↓
[(単語, 読み) のリスト]
    ↓
発音辞書に自動登録 (priority=5)
    ↓
VOICEVOXユーザー辞書と統合
    ↓
音声合成
```

### 優先順位

1. **手動/LLM辞書** (priority=10) - 最優先
2. **形態素解析** (priority=5) - 手動がない場合に使用

## 影響範囲

- `pyproject.toml` - 依存関係追加
- `src/movie_generator/audio/` - 新規モジュールと既存モジュールの拡張
- `src/movie_generator/config.py` - 設定項目追加

## ステータス

- [x] 実装完了
- [x] テスト完了
- [ ] 仕様書作成
