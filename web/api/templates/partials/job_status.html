{% if error %}
<div class="bg-red-50 border border-red-200 text-red-800 px-4 py-3 rounded">
    <p>{{ error }}</p>
</div>
{% else %}
<!-- Status Badge -->
<div class="mb-6">
    {% if job.status == "pending" %}
    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800">
        â³ å¾…æ©Ÿä¸­
    </span>
    {% elif job.status == "processing" %}
    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800">
        ğŸ”„ å‡¦ç†ä¸­
    </span>
    {% elif job.status == "completed" %}
    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800">
        âœ… å®Œäº†
    </span>
    {% elif job.status == "failed" %}
    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-red-100 text-red-800">
        âŒ å¤±æ•—
    </span>
    {% elif job.status == "cancelled" %}
    <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-gray-100 text-gray-800">
        ğŸš« ã‚­ãƒ£ãƒ³ã‚»ãƒ«
    </span>
    {% endif %}
</div>

<!-- Progress Bar -->
{% if job.status in ["pending", "processing"] %}
<div class="mb-6">
    <div class="flex justify-between items-center mb-2">
        <span class="text-sm font-medium text-gray-700">é€²æ—çŠ¶æ³</span>
        <span class="text-sm font-medium text-gray-700">{{ job.progress }}%</span>
    </div>
    <div class="w-full bg-gray-200 rounded-full h-4">
        <div 
            class="progress-bar bg-blue-600 h-4 rounded-full transition-all duration-300"
            style="width: {{ job.progress }}%"
        ></div>
    </div>
    {% if job.progress_message %}
    <p class="mt-2 text-sm text-gray-600">{{ job.progress_message }}</p>
    {% endif %}
    {% if job.current_step %}
    <p class="mt-1 text-xs text-gray-500">ç¾åœ¨ã®ã‚¹ãƒ†ãƒƒãƒ—: {{ job.current_step }}</p>
    {% endif %}
</div>

<div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
    <p class="text-sm text-blue-800">
        â±ï¸ å‹•ç”»ç”Ÿæˆã«ã¯5ã€œ10åˆ†ç¨‹åº¦ã‹ã‹ã‚Šã¾ã™ã€‚ã“ã®ãƒšãƒ¼ã‚¸ã‚’é–‰ã˜ãšã«ãŠå¾…ã¡ãã ã•ã„ã€‚
    </p>
</div>
{% endif %}

 <!-- Completed -->
{% if job.status == "completed" %}
<div class="space-y-4">
    <div class="bg-green-50 border border-green-200 rounded-lg p-4">
        <p class="text-green-800 font-medium">âœ… å‹•ç”»ã®ç”ŸæˆãŒå®Œäº†ã—ã¾ã—ãŸï¼</p>
        {% if job.video_size %}
        <p class="text-sm text-green-700 mt-1">ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚º: {{ "%.2f"|format(job.video_size / 1024 / 1024) }} MB</p>
        {% endif %}
    </div>

    <!-- Video Player -->
    <div class="w-full" id="video-player-container">
        <video
            controls
            preload="metadata"
            loop="false"
            class="w-full max-w-4xl mx-auto rounded-lg shadow-lg"
            style="max-height: 70vh;"
        >
            <source src="/api/jobs/{{ job.id }}/video" type="video/mp4">
            ãŠä½¿ã„ã®ãƒ–ãƒ©ã‚¦ã‚¶ã¯å‹•ç”»å†ç”Ÿã«å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚
        </video>
    </div>

    <a
        href="/api/jobs/{{ job.id }}/download"
        download
        class="block w-full bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-6 rounded-lg text-center transition duration-200"
    >
        ğŸ“¥ å‹•ç”»ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
    </a>

    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
        <p class="text-sm text-yellow-800">
            âš ï¸ ã“ã®å‹•ç”»ã¯24æ™‚é–“å¾Œã«è‡ªå‹•å‰Šé™¤ã•ã‚Œã¾ã™ã€‚å¿…è¦ãªå ´åˆã¯ä»Šã™ããƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„ã€‚
        </p>
    </div>
</div>
{% endif %}

<!-- Failed -->
{% if job.status == "failed" %}
<div class="bg-red-50 border border-red-200 rounded-lg p-4">
    <p class="text-red-800 font-medium">âŒ å‹•ç”»ã®ç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ</p>
    {% if job.error_message %}
    <p class="text-sm text-red-700 mt-2">ã‚¨ãƒ©ãƒ¼: {{ job.error_message }}</p>
    {% endif %}
    <p class="text-sm text-red-700 mt-2">åˆ¥ã®URLã§å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚</p>
</div>
{% endif %}

<!-- Cancelled -->
{% if job.status == "cancelled" %}
<div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
    <p class="text-gray-800 font-medium">ğŸš« ã‚¸ãƒ§ãƒ–ãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¾ã—ãŸ</p>
    <p class="text-sm text-gray-700 mt-2">ã‚­ãƒ¥ãƒ¼ãŒæº€æ¯ã®ãŸã‚ã€ã“ã®ã‚¸ãƒ§ãƒ–ã¯ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã¾ã—ãŸã€‚</p>
</div>
{% endif %}
{% endif %}
