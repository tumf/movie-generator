# Tests

テスト実装は将来のタスクとして残されています。

## 実装予定のテスト

### API テスト (`test_api.py`)

- [ ] ジョブ作成エンドポイント
- [ ] ジョブ取得エンドポイント
- [ ] ジョブステータスエンドポイント
- [ ] 動画ダウンロードエンドポイント
- [ ] レート制限のテスト
- [ ] キュー上限のテスト

### Worker テスト (`test_worker.py`)

- [ ] ジョブのポーリング
- [ ] 動画生成処理
- [ ] 進捗更新
- [ ] エラーハンドリング
- [ ] 同時実行制御
- [ ] 期限切れジョブのクリーンアップ

### E2E テスト (`test_e2e.py`)

- [ ] フルフローテスト（ジョブ作成→完了→ダウンロード）
- [ ] エラーケースのテスト

## テスト実行

```bash
# すべてのテストを実行
cd web
uv run pytest

# 特定のテストファイルを実行
uv run pytest tests/test_api.py

# カバレッジ付きで実行
uv run pytest --cov=api --cov=worker
```

## テスト環境の準備

テストには以下が必要です：

1. PocketBase のモック/テストインスタンス
2. movie-generator のモック
3. テスト用の環境変数

詳細は今後実装予定。
